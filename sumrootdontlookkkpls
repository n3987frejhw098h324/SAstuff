wait(10)
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local TeleportService = game:GetService("TeleportService")
local HttpService = game:GetService("HttpService")

local speaker = Players.LocalPlayer
local character = speaker.Character or speaker.CharacterAdded:Wait()
local humanoid = character:FindFirstChildWhichIsA("Humanoid")
local root = character:WaitForChild("HumanoidRootPart")

-- Grab all tools in workspace and move them to backpack (optional)
for _, tool in ipairs(workspace:GetChildren()) do
    if tool:IsA("Tool") then
        tool.Parent = speaker.Backpack
    end
end

task.wait(1)  -- wait 1 sec after grabbing tools

-- Check if "Uncanny Key" is in backpack
local keyTool = speaker.Backpack:FindFirstChild("Uncanny Key")
if keyTool then
    humanoid:EquipTool(keyTool)
end

task.wait(3)

root.CFrame = CFrame.new(1102, 582, -731)
task.wait(10)

local tween = TweenService:Create(root, TweenInfo.new(1.5, Enum.EasingStyle.Linear), {CFrame = CFrame.new(1126, 590, -780)})
tween:Play()
tween.Completed:Wait()

task.wait(10)

-- Serverhop logic
local Http = game:GetService("HttpService")
local Api = "https://games.roblox.com/v1/games/"
local _place, _id = game.PlaceId, game.JobId
local _servers = Api .. _place .. "/servers/Public?sortOrder=Asc&limit=10"

local function ListServers(cursor)
    local raw = game:HttpGet(_servers .. ((cursor and "&cursor=" .. cursor) or ""))
    return Http:JSONDecode(raw)
end

local time_to_wait = 6

while task.wait(time_to_wait) do
    if speaker.Character and speaker.Character:FindFirstChild("HumanoidRootPart") then
        speaker.Character.HumanoidRootPart.Anchored = true
    end

    local servers = ListServers()
    local server = servers.data[math.random(1, #servers.data)]

    TeleportService:TeleportToPlaceInstance(_place, server.id, speaker)
end
